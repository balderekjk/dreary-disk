<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <title>Content Manager</title>
</head>

<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script>
    // CMS.registerEditorComponent({
    //   id: "picture",
    //   label: "Picture",
    //   fields: [
    //     { name: 'src', label: 'Image Source', widget: 'string' },
    //     { name: 'alt', label: 'Alt Text', widget: 'string' },
    //     { name: 'caption', label: 'Caption', widget: 'string' },
    //     { name: 'float', label: 'Float', widget: 'select', options: ['none', 'left', 'right'] },
    //     { name: 'width', label: 'Width', widget: 'string', default: '200px' },
    //     { name: 'height', label: 'Height', widget: 'string', default: '300px' }
    //   ],
    //   pattern: /^<figure class="text-center sm:float-(.*?) float-none sm:max-w-\[50%\] sm:(.*?) mx-0 my-0">\s*<img src="(.*?)" alt="(.*?)" width="(.*?)" height="(.*?)" class="max-w-\[100%\] h-auto" \/>\s*<figcaption>(.*?)<\/figcaption>\s*<\/figure>$/ms,
    //   fromBlock: function (match) {
    //     return {
    //       float: match[1],
    //       marginClass: match[2],
    //       src: match[3],
    //       alt: match[4],
    //       width: match[5],
    //       height: match[6],
    //       caption: match[7]
    //     };
    //   },
    //   toBlock: function (obj) {
    //     const marginClass = obj.float == "right" ? "ml-6" : obj.float == "left" ? "mr-6" : "mx-auto";
    //     return `<figure class="text-center sm:float-${obj.float} float-none sm:max-w-[50%] sm:${marginClass} mx-0 my-0">
    //       <img src="${obj.src}" alt="${obj.alt}" width="${obj.width}" height="${obj.height}" class="max-w-[100%] h-auto" />
    //       <figcaption>${obj.caption}</figcaption>
    //     </figure>`;
    //   },
    //   toPreview: function (obj) {
    //     const marginClass = obj.float == "right" ? "ml-6" : obj.float == "left" ? "mr-6" : "mx-auto";
    //     return `<figure class="text-center sm:float-${obj.float} float-none sm:max-w-[50%] sm:${marginClass} mx-0 my-0">
    //       <img src="${obj.src}" alt="${obj.alt}" width="${obj.width}" height="${obj.height}" class="max-w-[100%] h-auto" />
    //       <figcaption>${obj.caption}</figcaption>
    //     </figure>`;
    //   }
    // });
  CMS.registerEditorComponent({
    id: "collapsible-note",
    label: "Collapsible Note",
    fields: [
      {
        name: 'summary',
        label: 'Summary',
        widget: 'string'
      },
      {
        name: 'contents',
        label: 'Contents',
        widget: 'markdown'
      }
    ],
    pattern: /^<details>$\s*?<summary>(.*?)<\/summary>\n\n(.*?)\n^<\/details>$/ms,
    fromBlock: function(match) {
      return {
        summary: match[1],
        contents: match[2]
      };
    },
    toBlock: function(data) {
      return `
  <details>
    <summary>${data.summary}</summary>

    ${data.contents}

  </details>
  `;
    },
    toPreview: function(data) {
      return `
  <details>
    <summary>${data.summary}</summary>

    ${data.contents}

  </details>
  `;
    }
  });

  CMS.init();
  </script>
</body>

</html>